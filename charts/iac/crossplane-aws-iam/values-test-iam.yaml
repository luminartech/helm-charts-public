---
# Note: Keep an alphabetical order, please
##
# IAM
##
global:
#   # 64 chars long to test trimming
#   releaseNameOverride: shah5zieta8cu4ahve9ooy2eix5eeseis6jaecop3nahjae4keizohbeiyoo5sho
  env: team-tier

Policy:
  tags:
    policy-only: test_value
  items:
    dicted:
      enabled: true
      labels:
        crossplane.io/infra-resource: test
      deletionPolicy: Delete
      forProvider:
        description: "IAM Policy generated using crossplane + helm chart"
        document:
          Version: "2012-10-17"
          Statement:
            accountRead:
              Effect: "Allow"
              Action:
                - "iam:GetAccountSummary"
                - "iam:ListAccountAliases"
                - "account:ListRegions"
              Resource: "*"
            route53RecordSets:
              Effect: "Allow"
              Action:
                - "route53:ChangeResourceRecordSets"
                - "route53:ListResourceRecordSets"
              Resource: 'arn:aws:route53:::hostedzone/{{ .Values.global.env | replace "-" "" }}*'
            route53ListHostedZones:
              Effect: "Allow"
              Action:
                - "route53:ListHostedZonesByName"
              Resource: "*"

    listed:
      enabled: true
      labels:
        crossplane.io/infra-resource: test
      deletionPolicy: Delete
      forProvider:
        description: "IAM Policy generated using crossplane + helm chart"
        document:
          Version: "2012-10-17"
          Statement:
            - Sid: "accountRead"
              Effect: "Allow"
              Action:
                - "iam:GetAccountSummary"
                - "iam:ListAccountAliases"
                - "account:ListRegions"
              Resource: "*"
            - Sid: "route53RecordSets"
              Effect: "Allow"
              Action:
                - "route53:ChangeResourceRecordSets"
                - "route53:ListResourceRecordSets"
              Resource: 'arn:aws:route53:::hostedzone/{{ .Values.global.env | replace "-" "" }}*'
            - Sid: route53ListHostedZones
              Effect: "Allow"
              Action:
                - "route53:ListHostedZonesByName"
              Resource: "*"

    raw:
      enabled: true
      labels:
        crossplane.io/infra-resource: test
      deletionPolicy: Delete
      forProvider:
        description: "IAM Policy generated using crossplane + helm chart"
        document: |
          {
            "Version": "2012-10-17",
            "Statement": [
              {
                "Sid": "accountRead",
                "Effect": "Allow",
                "Action": [
                  "iam:GetAccountSummary",
                  "iam:ListAccountAliases",
                  "account:ListRegions"
                ],
                "Resource": "*"
              },
              {
                "Sid": "route53RecordSets",
                "Effect": "Allow",
                "Action": [
                  "route53:ChangeResourceRecordSets",
                  "route53:ListResourceRecordSets"
                ],
                "Resource": "arn:aws:route53:::hostedzone/{{ .Values.global.env | replace "-" "" }}*"
              },
              {
                "Sid": "route53ListHostedZones",
                "Effect": "Allow",
                "Action": [
                  "route53:ListHostedZonesByName"
                ],
                "Resource": "*"
              }
            }
          }
