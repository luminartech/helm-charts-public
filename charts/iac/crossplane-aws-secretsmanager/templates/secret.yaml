{{- $kind := "Secret" -}}
{{- $root := . -}}
{{- $kindObj := or (get $root.Values $kind) (dict) -}}
{{- range $name, $item := $kindObj.items -}}
  {{- if hasKey $item "enabled" | ternary ($item.enabled) (ne $kindObj.enabled false) }}
---
apiVersion: {{ .apiVersion | default "secretsmanager.aws.crossplane.io/v1beta1" }}
kind: {{ $kind }}
metadata:
    {{- with .name }}
  name: {{ include "common-gitops.tplvalues.render" (dict "value" . "context" $root) | quote }}
      {{- else }}
  name: {{ include "common-gitops.names.itemFullname" (dict "root" $root "name" $name) | quote }}
      {{- end }}
    {{- include "common-gitops.labels" (dict "root" $root "name" $name "kind" $kind) | trim | nindent 2 }}
    {{- include "common-gitops.annotations" (dict "root" $root "name" $name "kind" $kind) | trim | nindent 2 }}
spec:
    {{- include "common-gitops.crossplane.awsDeletionPolicy" (dict "root" $root "name" $name "kind" $kind) | nindent 2 }}
  forProvider:
    {{- with .forProvider }}
      {{- with .name }}
    name: {{ include "common-gitops.tplvalues.render" (dict "value" . "context" $root) | quote }}
        {{- end }}
      {{- with .addReplicaRegions }}
    addReplicaRegions:
        {{- include "common-gitops.tplvalues.render" (dict "value" . "context" $root) | nindent 8 }}
      {{- end }}
      {{- with .replica }}
    replica:
        {{- include "common-gitops.tplvalues.render" (dict "value" . "context" $root) | nindent 8 }}
      {{- end }}
      {{- with .binarySecretRef }}
    binarySecretRef:
        {{- include "common-gitops.tplvalues.render" (dict "value" . "context" $root) | nindent 8 }}
      {{- end }}
      {{- with .description }}
    description: "{{ include "common-gitops.tplvalues.render" (dict "value" . "context" $root) }}"
      {{- end }}
      {{- with .forceDeleteWithoutRecovery }}
    forceDeleteWithoutRecovery: {{ . }}
      {{- end }}
      {{- with .forceOverwriteReplicaSecret }}
    forceOverwriteReplicaSecret: {{ . }}
      {{- end }}
      {{- include "common-gitops.crossplane.reference" (dict "field" "kmsKeyID" "context" . "root" $root "optional" true) | nindent 4 }}
      {{- with .recoveryWindowInDays }}
    recoveryWindowInDays: {{ . }}
      {{- end }}
      {{- with .resourcePolicy }}
    resourcePolicy: |-
        {{- include "common-gitops.tplvalues.render" (dict "value" . "context" $root) | nindent 6 }}
      {{- end }}
      {{- with .stringSecretRef }}
    stringSecretRef:
        {{- include "common-gitops.tplvalues.render" (dict "value" . "context" $root) | nindent 6 }}
      {{- end }}
    {{- end }}
    {{- include "common-gitops.crossplane.awsRegion" (dict "root" $root "name" $name "kind" $kind) | nindent 4 }}
    {{- if eq .apiVersion "secretsmanager.aws.upbound.io/v1beta1" }}
      {{- include "common-gitops.tags.dict" (dict "root" $root "name" $name "kind" $kind "nameOverride" .name) | nindent 4 }}
    {{- else }}
      {{- include "common-gitops.tags.list" (dict "root" $root "name" $name "kind" $kind "nameOverride" .name) | nindent 4 }}
    {{- end }}
    {{- include "common-gitops.crossplane.publishConnectionDetailsTo" (dict "root" $root "name" $name "kind" $kind "nameOverride" .name) | nindent 2 }}
    {{- include "common-gitops.crossplane.writeConnectionSecretToRef" (dict "root" $root "name" $name "kind" $kind "nameOverride" .name) | nindent 2 }}
    {{- include "common-gitops.crossplane.providerConfigRef" (dict "root" $root "name" $name "kind" $kind) | nindent 2 }}
  {{- end -}}
{{- end -}}
